(window["webpackJsonpposts-manager"]=window["webpackJsonpposts-manager"]||[]).push([[0],{214:function(e,t,n){e.exports=n.p+"static/media/new-post.8979a364.png"},215:function(e,t,n){e.exports=n.p+"static/media/sign-out.c52df44b.png"},216:function(e,t,n){e.exports=n.p+"static/media/initials-sign.b213dd04.jpg"},218:function(e,t,n){e.exports=n.p+"static/media/sign-up.436d141f.png"},219:function(e,t,n){e.exports=n.p+"static/media/sign-in.fd815b7e.png"},220:function(e,t,n){e.exports=n.p+"static/media/project-logo.67099229.jpg"},221:function(e,t,n){e.exports=n.p+"static/media/leafs.77f29f12.jpg"},223:function(e,t,n){e.exports=n(425)},228:function(e,t,n){},233:function(e,t,n){},235:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){},238:function(e,t,n){},385:function(e,t,n){},386:function(e,t,n){},387:function(e,t,n){},388:function(e,t,n){},425:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(212),o=n.n(i),c=(n(228),n(21)),s=n(22),l=n(25),u=n(23),m=n(26),p=n(6),y=n(33),d=n(8),f=n(214),h=n.n(f),E=n(215),g=n.n(E),b=n(216),v=n.n(b),O=(n(233),Object(d.b)(null,function(e){return{signOut:function(){return e(function(e,t,n){(0,n.getFirebase)().auth().signOut().then(function(){e({type:"SIGNOUT_SUCCESS"})})})}}})(function(e){return r.a.createElement("ul",null,r.a.createElement("li",{id:"newPost"},r.a.createElement(p.c,{to:"/create"},r.a.createElement("img",{src:h.a,alt:""}))),r.a.createElement("li",null,r.a.createElement(p.c,{onClick:e.signOut},r.a.createElement("img",{src:g.a,alt:""}))),r.a.createElement("div",{id:"initials"},r.a.createElement("img",{src:v.a,alt:""}),r.a.createElement("div",{id:"centered"},r.a.createElement(p.c,{to:"/"},e.profile.initials))))})),j=n(218),w=n.n(j),N=n(219),S=n.n(N),C=function(){return r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(p.c,{to:"/signup"},r.a.createElement("img",{src:w.a,alt:""}))),r.a.createElement("li",null,r.a.createElement(p.c,{to:"/signin"},r.a.createElement("img",{src:S.a,alt:""}))))},P=(n(235),n(220)),x=n.n(P),R=Object(d.b)(function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}})(function(e){var t=e.auth,n=e.profile,a=t.uid?r.a.createElement(O,{profile:n}):r.a.createElement(C,null);return r.a.createElement("nav",{className:"myNav"},r.a.createElement("div",{id:"logo"},r.a.createElement("img",{src:x.a,alt:""}),r.a.createElement("div",{id:"centered"},r.a.createElement(p.b,{to:"/"},"Posts Manager"))),a)}),A=n(47),F=n.n(A),I=(n(236),function(e){var t=e.notifications;return r.a.createElement("div",{id:"notifications"},r.a.createElement("h1",null,"Notifications"),r.a.createElement("ul",null,t&&t.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("span",{id:"notif-user"},e.user," "),r.a.createElement("span",{id:"notif-content"}," ",e.content),r.a.createElement("div",{id:"notif-date"},F()(e.time.toDate()).fromNow()))})))}),k=(n(237),function(e){var t=e.post;return r.a.createElement("div",{className:"post-summary"},r.a.createElement("h1",{className:"post-title",key:t.id},t.title),r.a.createElement("p",{className:"posted-by"},"Posted by ",t.authFirstName," ",t.authLastName," "),r.a.createElement("p",{className:"post-date"}," ",F()(t.createdAt.toDate()).calendar()," "))}),_=(n(238),function(e){var t=e.posts;return r.a.createElement("div",{id:"posts-list"},t&&t.map(function(e){return r.a.createElement(p.b,{to:"/post/"+e.id,key:e.id},r.a.createElement(k,{post:e}))}))}),U=n(17),D=n(28),L=(n(385),n(221)),G=n.n(L),T=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.posts,n=e.auth,a=e.notifications;return n.uid?r.a.createElement("div",{id:"dashboard"},r.a.createElement("div",null,r.a.createElement(_,{posts:t})),r.a.createElement("img",{src:G.a,alt:""}),r.a.createElement("div",null,r.a.createElement(I,{notifications:a}))):r.a.createElement(y.a,{to:"/signin"})}}]),t}(a.Component),W=Object(U.d)(Object(d.b)(function(e){return{posts:e.firestore.ordered.posts,auth:e.firebase.auth,notifications:e.firestore.ordered.notifications}}),Object(D.firestoreConnect)([{collection:"posts",orderBy:["createdAt","desc"]},{collection:"notifications",limit:3,orderBy:["time","desc"]}]))(T),B=(n(386),Object(U.d)(Object(d.b)(function(e,t){var n=t.match.params.post_id,a=e.firestore.data.posts;return{post:a?a[n]:null,auth:e.firebase.auth}}),Object(D.firestoreConnect)([{collection:"posts"}]))(function(e){var t=e.post;return e.auth.uid?t?r.a.createElement("div",{className:"post-details"},r.a.createElement("div",{className:"content"},r.a.createElement("h1",null,t.title),r.a.createElement("h3",null,t.content)),r.a.createElement("div",{className:"post-auth"},r.a.createElement("div",null,"Posted by ",t.authFirstName," ",t.authLastName),r.a.createElement("p",null,F()(t.createdAt.toDate()).calendar()))):r.a.createElement("p",null,"Loading post..."):r.a.createElement(y.a,{to:"/signin"})})),z=n(24),M=n(48),Q=n.n(M),J=(n(387),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},n.handleChange=function(e){n.setState(Object(z.a)({},e.target.id,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.props.signIn(n.state)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.authError;return e.auth.uid?r.a.createElement(y.a,{to:"/"}):r.a.createElement("div",{id:"sign-container"},r.a.createElement("img",{src:Q.a,alt:""}),r.a.createElement("form",{id:"signin-form",onSubmit:this.handleSubmit},r.a.createElement("h3",null,"SIGN IN"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",null,"Sign in"),r.a.createElement("div",{id:"signin-err"},t?r.a.createElement("p",null,t):null))))}}]),t}(a.Component)),H=Object(d.b)(function(e){return{authError:e.auth.authError,auth:e.firebase.auth}},function(e){return{signIn:function(t){return e(function(e){return function(t,n,a){(0,a.getFirebase)().auth().signInWithEmailAndPassword(e.email,e.password).then(function(){t({type:"LOGIN_SUCCESS"})}).catch(function(e){t({type:"LOGIN_ERROR",err:e})})}}(t))}}})(J),K=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",firstName:"",lastName:""},n.handleChange=function(e){n.setState(Object(z.a)({},e.target.id,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.props.signUp(n.state)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.auth,n=e.authError;return t.uid?r.a.createElement(y.a,{to:"/"}):r.a.createElement("div",{id:"sign-container"},r.a.createElement("img",{src:Q.a,alt:""}),r.a.createElement("form",{id:"signin-form",onSubmit:this.handleSubmit},r.a.createElement("h3",null,"SIGN UP"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"firstName"},"Last Name"),r.a.createElement("input",{type:"text",id:"firstName",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"lastName"},"Last Name"),r.a.createElement("input",{type:"text",id:"lastName",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn pink lighten-1 z-depth-0"},"Sign Up"),r.a.createElement("div",{className:"red-text center"},n?r.a.createElement("p",null," ",n," "):null))))}}]),t}(a.Component),V=Object(d.b)(function(e){return{auth:e.firebase.auth,authError:e.auth.authError}},function(e){return{signUp:function(t){return e(function(e){return function(t,n,a){var r=a.getFirebase,i=a.getFirestore,o=r(),c=i();o.auth().createUserWithEmailAndPassword(e.email,e.password).then(function(n){return c.collection("users").doc(n.user.uid).set({firstName:e.firstName,lastName:e.lastName,initials:e.firstName[0]+e.lastName[0]}).then(function(){t({type:"SIGNUP_SUCCESS"})}).catch(function(e){t({type:"SIGNUP_ERROR",err:e})})})}}(t))}}})(K);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var Z=function(e){return function(t,n,a){a.getFirebase;var r=(0,a.getFirestore)(),i=n().firebase.profile,o=n().firebase.auth.uid;r.collection("posts").add(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(n,!0).forEach(function(t){Object(z.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{authFirstName:i.firstName,authLastName:i.lastName,authId:o,createdAt:new Date})).then(function(e){t({type:"CREATE_POST",post:e})}).catch(function(e){t({type:"CREATE_POST_ERR",err:e})})}},$=(n(388),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",content:""},n.handleChange=function(e){n.setState(Object(z.a)({},e.target.id,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.props.createPost(n.state),n.props.history.push("/")},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.props.auth.uid?r.a.createElement("div",{id:"create-post"},r.a.createElement("img",{src:Q.a,alt:""}),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h3",null,"Create new post"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",id:"title",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"content"},"Post content"),r.a.createElement("textarea",{id:"content",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",null,"Create")))):r.a.createElement(y.a,{to:"/signin"})}}]),t}(a.Component)),q=Object(d.b)(function(e){return{auth:e.firebase.auth}},function(e){return{createPost:function(t){return e(Z(t))}}})($),Y=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(R,null),r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/",component:W}),r.a.createElement(y.b,{path:"/signin",component:H}),r.a.createElement(y.b,{path:"/signup",component:V}),r.a.createElement(y.b,{path:"/create",component:q}),r.a.createElement(y.b,{path:"/post/:post_id",component:B}))))}}]),t}(a.Component),ee=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function te(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(n,!0).forEach(function(t){Object(z.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var re={authError:null},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return ae({},e,{authError:"Login failed, please try again!"});case"LOGIN_SUCCESS":return console.log("Login success"),ae({},e,{authError:null});case"SIGNOUT_SUCCESS":return console.log("signout success"),e;case"SIGNUP_SUCCESS":return console.log("signup success"),ae({},e,{authError:null});case"SIGNUP_ERROR":return console.log("signup error"),ae({},e,{authError:t.err.message});default:return e}},oe={posts:[{id:"1",title:"xxxx",content:"yyyyyyyyyyyyy yyyyyyyyyyy yyyyyyyyyyyyyyy yyyyyyyyyyyyyyyy"},{id:"2",title:"xxxx",content:"yyyyyyyyyyyyy yyyyyyyyyyy yyyyyyyyyyyyyyy yyyyyyyyyyyyyyyy"},{id:"3",title:"xxxx",content:"yyyyyyyyyyyyy yyyyyyyyyyy yyyyyyyyyyyyyyy yyyyyyyyyyyyyyyy"}]},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_POST":return console.log("created post",t.post),e;case"CREATE_POST_ERR":return console.log("created post error",t.err),e;default:return e}},se=n(64),le=Object(U.c)({auth:ie,post:ce,firestore:se.firestoreReducer,firebase:D.firebaseReducer}),ue=n(222),me=n(135),pe=n.n(me);n(420),n(423);pe.a.initializeApp({apiKey:"AIzaSyC1HduecZdrc4_-5XnQ9OQR7ug5GouVoAQ",authDomain:"posts-manager-app.firebaseapp.com",databaseURL:"https://posts-manager-app.firebaseio.com",projectId:"posts-manager-app",storageBucket:"posts-manager-app.appspot.com",messagingSenderId:"389730848597",appId:"1:389730848597:web:12be279914396555"});var ye=pe.a,de=Object(U.e)(le,Object(U.d)(Object(U.a)(ue.a.withExtraArgument({getFirebase:D.getFirebase,getFirestore:se.getFirestore})),Object(se.reduxFirestore)(ye),Object(D.reactReduxFirebase)(ye,{useFirestoreForProfile:!0,userProfile:"users",attachAuthIsReady:!0})));de.firebaseAuthIsReady.then(function(){o.a.render(r.a.createElement(d.a,{store:de},r.a.createElement(Y,null)),document.getElementById("root"))}),function(e){if("serviceWorker"in navigator){if(new URL("/Posts_Manager_App",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/Posts_Manager_App","/service-worker.js");ee?(!function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):te(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):te(t,e)})}}()},48:function(e,t,n){e.exports=n.p+"static/media/form1.3a1b02c1.png"}},[[223,1,2]]]);
//# sourceMappingURL=main.54389f40.chunk.js.map